{% extends 'layouts/default.njk' %}

{% block additional_styles %}
<link rel="stylesheet" href="{{ '/css/vendor/prism.css' | url }}">
{% endblock %}

{% block main -%}
<article{% if language %} lang="{{ language }}"{%endif%} {% if coverImage and 'Geknipst' not in tags | filterTagList -%} class="featured"{%endif%}>
  {{ super() }}
</article>
{% endblock -%}

{%- block articleheader %}
<header class="articleheader">
  <h1>{{ title }}</h1>
  {% if date or tags -%}
  <div class="meta">
  {% if date %}
  <time>{{ date | longDate }}</time>
  {% endif %}
  {% if tags -%}
  {% set cue %}{% if tags | filterTagList | length > 1 %}Themen{% else %}Thema{% endif %}{% endset %}
  <span>{{ cue }}:
  {% for tag in tags | filterTagList -%}
  {% set tagUrl %}/themen/thema/{{ tag | slugify }}/{% endset -%}
  <a href="{{ tagUrl | url }}" class="post-tag">{{ tag }}</a>{% if not loop.last -%}
  {% if loop.index == loop.length -1 %} und {% else -%}, {% endif %}
  {% endif %}
  {% endfor -%}
  {% endif -%}
  {% endif -%}
  </div>
</header>
{%- endblock -%}

{%- block content %}
<div class="content">
  {{ super() }}
</div>
{% endblock %}

{% block featureimage -%}
  {% if coverImage -%}
    <figure class="feature-image">
      <img src="/img/{{ coverImage }}" alt="{{ title | e }}" />
    </figure>
  {% endif -%}
{% endblock -%}

{% block articlefooter -%}
{%- if collections.blog %}
{%- set nextPost = collections.blog | getNextCollectionItem(page) %}
{%- set previousPost = collections.blog | getPreviousCollectionItem(page) %}
{%- if nextPost or previousPost %}
<footer class="articlefooter">
{% if keywords or persons %}
<nav class="tags" aria-labelledby="tags-nav">
  <h3 id="tags-nav" class="visually-hidden">Links zu Stichworten dieses Artikels</h3>
  <ul>
    {% for person in persons %}
    <li><a href="/personen/person/{{ person | slugify }}/">#{{ person }}</a></li>
    {% endfor %}
    {% for keyword in keywords %}
    <li><a href="/stichworte/stichwort/{{ keyword | slugify }}/">#{{ keyword }}</a></li>
    {% endfor %}
  </ul>
</nav>
{% endif %}
<nav class="prevnext" aria-labelledby="pages-nav">
  <h3 id="pages-nav" class="visually-hidden">Links zu vorigen oder späteren Einträgen</h3>
  <ul>
  {%- if previousPost %}
    <li class="previous-post"><a href="{{ previousPost.url | url }}"><span class="visually-hidden">Voriger Eintrag: </span>{{ previousPost.data.title }}</a></li>
  {% endif %}
  {%- if nextPost %}
    <li class="next-post"><a href="{{ nextPost.url | url }}"><span class="visually-hidden">Nächster Eintrag: </span>{{ nextPost.data.title }}</a></li>
  {% endif %}
  </ul>
</footer>
{%- endif %}
{%- endif %}
{% endblock -%}
